{% extends 'dashboard/base.html' %}

{% load static %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{% static 'dashboard/datatables/datatables.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'dashboard/css/addon_datatables.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'dashboard/css/style.css' %}">
{% endblock stylesheets %}

{% block title %} {{ title }} {% endblock title %}

{% block body_content %}
<div class="card-panel deep-orange accent-3">
    <div class="card-container center-align">
        <h4 class="deep-orange-text accent-3 white-text ">Faire une Estimation</h4>
        <p class="white-text lighten-4">remplissez le plus d'informations possible que vous avez sur le produit</p>
    </div>
</div>

<div class="card-panel" id="">
    <form action="" method="post">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <div class="row">
            <!-- <div class="col m6 s12"> -->
            <div class="input-field col m3 s12">
                {{ form.shop }}
                <label for="{{form.shop.id_for_label}}">Boutique</label>
            </div>
            <div class="input-field col m3 s12">
                {{ form.client_name }}
                <label for="{{form.client_name.id_for_label}}">Vendeur</label>
            </div>

            <div class="input-field col m3 s12">
                {{ form.product_name }}
                <label for="{{form.product_name.id_for_label}}">Nom Produit</label>
            </div>
            <div class="input-field col m3 s12">
                {{ form.year_of_release }}
                <label for="{{form.year_of_release.id_for_label}}">Année de sortie</label>
            </div>
            <!-- </div> -->
        </div>
        <div class="row">
            <div class="input-field col m3 s6">
                {{ form.new_price }}
                <label for="{{form.new_price.id_for_label}}">Prix Neuf</label>
            </div>
            <div class="input-field col m3 s6">
                {{ form.estate }}
                <label for="{{form.estate.id_for_label}}">Etat</label>
            </div>
            <div class="input-field col m3 s6">
                {{ form.obsolescence }}
                <label for="{{form.obsolescence.id_for_label}}">Obsolescence</label>
            </div>
            <div class="input-field col m3 s6">
                {{ form.rarety }}
                <label for="{{form.rarety.id_for_label}}">Rareté </label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col m3 s6">
                {{ form.dimension }}
                <label for="{{form.dimension.id_for_label}}">Dimension</label>
            </div>
            <div class="input-field col m3 s6">
                <label for="{{form.sale_bill.id_for_label}}">
                    {{ form.sale_bill }}
                    <span>Facture</span>
                </label>
            </div>

            <div class="input-field col m3 s6">
                <label for="{{form.charger.id_for_label}}">
                    {{ form.charger }}
                    <span>Chargeur</span>
                </label>
            </div>
            <div class="input-field col m3 s6">
                <label for="{{form.original_box.id_for_label}}">
                    {{ form.original_box }}
                    <span>Boite d'origine</span>
                </label>
            </div>
        </div>

        <div class="row">
            <div class="input-field col m6 s6">
                <button class="waves-effect waves-green black btn-flat" type="submit">
                    <i class="material-icons right deep-orange-text accent-3 right">thumb_up_alt</i>
                    <b class="deep-orange-text accent-3">Enregistrer</b>
                </button>
            </div>
        </div>

    </form>
</div>
<section class="center-align">
    <div class="card material-table">
        <div class="table-header">
            <span class="table-title">Liste Des Devis</span>
            <div class="actions">
                <!-- Here is where we should make the linking-->
                <a href="#man" class="search-toggle waves-effect btn-flat nopadding"><i
                        class="material-icons">search</i></a>
            </div>
        </div>
        <table id="datatable" class="responsive-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Produit</th>
                    <th>quantity</th>
                    <th>chargeur</th>
                    <th>estimation</th>
                    <th>supprimer</th>
                </tr>
            </thead>
            <tbody>
                {% for estimate in estimates %}
                <tr>
                    <th class="black-text"> {{ estimate.client_name }}</th>
                    <th class="black-text">{{ estimate.product_name}}</th>
                    <th class="black-text">{{ estimate.used_price }}</th>
                    <th class="black-text">{{ estimate.charger }}</th>

                    <th>
                        <a href="{% url 'dashboard:estimationResultPage' estimate.pk %}"
                            class="green-text accent-4 waves-effect btn-flat tooltipped" data-position="left"
                            data-tooltip="tirer"><span class="material-icons">receipt</span></a>
                    </th>
                    <th>
                        <a href="{% url 'dashboard:estimationDeletePage' estimate.pk %}"
                            class="red-text accent-4 waves-effect btn-flat tooltipped" data-position="left"
                            data-tooltip="Supprimer"><span class="material-icons">delete</span></a>
                    </th>

                </tr>

                {% endfor %}
            </tbody>
        </table>
        <p>final_price: {{final_price}}</p>

    </div>
</section>
{% endblock body_content%}